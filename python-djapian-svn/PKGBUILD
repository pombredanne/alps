# Maintainer: Alper Kanat <alperkanat@raptiye.org>
# Contributor: Piotr Husiaty≈Ñski <phusiatynski@gmail.com>

pkgname="python-djapian-svn"
pkgver=378
pkgrel=1
pkgdesc="Search API for Django with Xapian"
arch=('any')
license=("New BSD License")
url="http://code.google.com/p/djapian/"
depends=('django' 'xapian-python-bindings' 'python2')
makedepends=('subversion' 'python2-distribute')
provides=('python-djapian')
conflicts=('python-djapian')
source=()
md5sums=()

_svntrunk=http://djapian.googlecode.com/svn/trunk/
_svnmod=djapian

build() {
    cd $srcdir

	# checking out or updating code
	echo "Downloading sources from SVN..."
	if [[ -d "$_svnmod" ]]; then
		svn up -r $pkgver
	else
		svn co $_svntrunk -r $pkgver $_svnmod
	fi

	# copying files..
	echo "Copying files..."
	cd $srcdir/$_svnmod

	# first copying django
	python2 setup.py install --root=$pkgdir --optimize=1 || return 1

	# copying license information
	install -D -m644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
